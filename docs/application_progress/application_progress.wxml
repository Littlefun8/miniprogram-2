<!--application_progress.wxml-->
<view class="container">
  <!-- 标签切换栏 -->
  <view class="tabs-container">
    <view class="tabs-header">
      <view 
        class="tab-item {{activeTab === 'all' ? 'active' : ''}}" 
        bindtap="onTabChange" 
        data-tab="all"
      >全部</view>
      <view 
        class="tab-item {{activeTab === 'pending' ? 'active' : ''}}" 
        bindtap="onTabChange" 
        data-tab="pending"
      >待处理</view>
      <view 
        class="tab-item {{activeTab === 'processing' ? 'active' : ''}}" 
        bindtap="onTabChange" 
        data-tab="processing"
      >处理中</view>
      <view 
        class="tab-item {{activeTab === 'completed' ? 'active' : ''}}" 
        bindtap="onTabChange" 
        data-tab="completed"
      >已完成</view>
    </view>
    <view class="tabs-slider">
      <view class="slider-bar" style="left: {{sliderLeft}}; width: {{sliderWidth}}"></view>
    </view>
  </view>

  <!-- 申请列表 -->
  <view class="applications-list" wx:if="{{applications.length > 0}}">
    <view 
      class="application-item" 
      wx:for="{{applications}}" 
      wx:key="id" 
      bindtap="onApplicationTap" 
      data-id="{{item.id}}"
    >
      <view class="application-header">
        <view class="job-title">{{item.jobTitle}}</view>
        <view class="application-status {{item.status}}">{{item.statusText}}</view>
      </view>
      
      <view class="company-info">
        <text>{{item.company}}</text>
        <text class="separator">|</text>
        <text>{{item.location}}</text>
      </view>
      
      <view class="application-timeline">
        <view class="timeline-item {{item.timeline[0].done ? 'done' : ''}}">
          <view class="timeline-dot"></view>
          <view class="timeline-content">
            <view class="timeline-title">提交申请</view>
            <view class="timeline-time">{{item.timeline[0].time}}</view>
          </view>
        </view>
        
        <view class="timeline-item {{item.timeline[1].done ? 'done' : ''}}">
          <view class="timeline-dot"></view>
          <view class="timeline-content">
            <view class="timeline-title">简历筛选</view>
            <view class="timeline-time">{{item.timeline[1].time || '等待中'}}</view>
          </view>
        </view>
        
        <view class="timeline-item {{item.timeline[2].done ? 'done' : ''}}">
          <view class="timeline-dot"></view>
          <view class="timeline-content">
            <view class="timeline-title">面试</view>
            <view class="timeline-time">{{item.timeline[2].time || '等待中'}}</view>
          </view>
        </view>
        
        <view class="timeline-item {{item.timeline[3].done ? 'done' : ''}}">
          <view class="timeline-dot"></view>
          <view class="timeline-content">
            <view class="timeline-title">录用</view>
            <view class="timeline-time">{{item.timeline[3].time || '等待中'}}</view>
          </view>
        </view>
      </view>
      
      <view class="application-footer">
        <view class="application-date">申请时间：{{item.applyDate}}</view>
        <t-button 
          size="small" 
          theme="primary" 
          variant="outline" 
          bindtap="onViewDetailTap" 
          data-id="{{item.id}}"
          catchtap
        >查看详情</t-button>
      </view>
    </view>
  </view>

  <!-- 空状态 -->
  <view class="empty-state" wx:else>
    <t-empty icon="info-circle-filled" description="暂无申请记录" />
    <view class="empty-hint">快去申请心仪的职位吧</view>
    <t-button theme="primary" size="medium" class="browse-btn" bindtap="onBrowseJobsTap">浏览职位</t-button>
  </view>

  <!-- 加载状态 -->
  <view class="loading-state" wx:if="{{isLoading}}">
    <t-loading theme="circular" size="40rpx" />
    <text class="loading-text">加载中...</text>
  </view>

  <!-- 加载完毕提示 -->
  <view class="no-more" wx:if="{{!isLoading && applications.length > 0 && noMoreData}}">
    没有更多数据了
  </view>
</view> 